"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[12807,12966,22422,77882,92063,97629],{15349:(e,t,i)=>{i.r(t),i.d(t,{BlackSection:()=>j,BottomBarWrapper:()=>ee,ButtonWrapper:()=>J,CenterSection:()=>C,Details:()=>W,EventTitle:()=>y,FormSection:()=>Z,FormWrapper:()=>Q,HashtagSection:()=>P,HashtagSectionHeading:()=>Y,HashtagSectionTitle:()=>z,Head:()=>E,HeaderColumn:()=>I,HeaderTitle:()=>T,ImageWrapper:()=>k,InnerDetails:()=>H,Name:()=>M,RatingContentWrapper:()=>A,RatingDetails:()=>L,RatingWrapper:()=>V,RatingWrapperTitle:()=>O,RatingsMatter:()=>G,RatingsMatterInner:()=>U,RatingsMatterText:()=>B,ReviewHashtagList:()=>F,ReviewHashtags:()=>$,ReviewRatingContent:()=>b,ReviewRatingWrapper:()=>S,ReviewTag:()=>K,ScrollArea:()=>X,SideSection:()=>_,SubTitle:()=>D,TextReviewSection:()=>q,Watched:()=>N});var n=i(86089),r=i(21960);const a=(0,r.keyframes)(["from{opacity:0;transform:rotateX(90deg);}"]),o=(0,r.keyframes)(["from{opacity:0.3;}"]),s=(0,r.keyframes)(["from{opacity:0;transform:rotateX(-90deg);}"]),l=(0,r.css)(["height:100%;background-color:",";"],(e=>{let{theme:t}=e;return t.WHITE})),d=(0,r.css)(["height:fit-content;max-height:600px;max-width:360px;margin:80px auto 0;position:relative;"]),c=(0,r.css)(["position:fixed;bottom:0;top:0;left:0;z-index:",";"],(e=>{let{theme:t}=e;return t.afterZ})),u=(0,r.css)(["position:fixed;top:0;left:0;z-index:",";width:100%;"],(e=>{let{theme:t}=e;return t.afterZ})),p=(0,r.css)(["animation:"," 0.4s ease both;"],o),h=(0,r.css)(["opacity:1;height:auto;visibility:visible;"]),g=(0,r.css)(["position:relative;top:-100px;"]),m=(0,r.css)(["margin-top:6px;max-height:380px;"]),x=(0,r.css)(["padding-top:16px;"]),f=(0,r.css)(["padding:0 16px 16px;"]),v=(0,r.css)(["opacity:0;height:0;visibility:hidden;overflow:hidden;"]),R=(0,r.css)(["color:",";border:solid 1px ",";background:",";"],(e=>{let{theme:t}=e;return t.WHITE}),(e=>{let{theme:t}=e;return t.BMS_PINK_1}),(e=>{let{theme:t}=e;return t.BMS_PINK_1})),w=(0,r.css)(["position:fixed;left:0;bottom:0;z-index:",";width:100%;"],(e=>{let{theme:t}=e;return t.afterZ})),S=r.default.div.withConfig({componentId:"sc-11cocd3-0"})([""," transform-origin:50% 100%;animation:"," 0.4s both ease;"],(e=>{let{isMobile:t}=e;return t&&l}),a),b=r.default.div.withConfig({componentId:"sc-11cocd3-1"})(["background-color:",";position:absolute;inset:0;width:100vw;height:100vh;max-width:100%;margin:0 auto;"," @supports (-webkit-touch-callout:none){height:100%;}"],(e=>{let{theme:t}=e;return t.WHITE}),(e=>{let{isDesktop:t}=e;return t?d:c})),E=r.default.div.withConfig({componentId:"sc-11cocd3-2"})(["background-color:",";box-shadow:",";",""],(e=>{let{theme:t}=e;return t.WHITE}),(e=>{let{theme:t}=e;return t.SHADOW_2}),(e=>{let{isMobile:t}=e;return t&&u})),I=r.default.div.withConfig({componentId:"sc-11cocd3-3"})([""," padding:0 16px;height:56px;"],(e=>{let{theme:t}=e;return t.flexCentered})),_=r.default.div.withConfig({componentId:"sc-11cocd3-4"})(["width:10%;cursor:pointer;"]),C=r.default.div.withConfig({componentId:"sc-11cocd3-5"})(["width:80%;"," flex-wrap:wrap;"],(e=>{let{theme:t}=e;return t.flexCentered})),T=r.default.h4.withConfig({componentId:"sc-11cocd3-6"})([""," ",";text-align:center;color:",";width:100%;transition:all 0.4s ease;"],(e=>{let{scrollTop:t}=e;return t&&p}),(e=>{let{theme:t}=e;return t["body-medium"]}),(e=>{let{theme:t}=e;return t.GREY_1})),y=r.default.h2.withConfig({componentId:"sc-11cocd3-7"})([""," "," ",";text-align:center;color:",";transition:all 0.4s ease;width:220px;"],p,n.ellipsisCss,(e=>{let{theme:t}=e;return t["small-regular"]}),(e=>{let{theme:t}=e;return t.GREY_4})),A=r.default.div.withConfig({componentId:"sc-11cocd3-8"})(["border-radius:3px;overflow-y:scroll;scroll-behavior:smooth;-webkit-overflow-scrolling:touch;padding:0;height:calc(100vh - 113px);background-color:",";margin-top:56px;transition:all 0.4s ease;"," ",""],(e=>{let{theme:t}=e;return t.WHITE}),(e=>{let{inputScroll:t,isMobile:i}=e;return i&&t&&g}),(e=>{let{isMobile:t}=e;return!t&&m})),j=r.default.div.withConfig({componentId:"sc-11cocd3-9"})(["height:100px;width:100%;"]),k=r.default.div.withConfig({componentId:"sc-11cocd3-10"})(["margin:0 auto;display:block;padding:32px 32px 8px;transition:all 0.4s ease;"]),H=r.default.div.withConfig({componentId:"sc-11cocd3-11"})(["min-height:230px;"]),W=r.default.div.withConfig({componentId:"sc-11cocd3-12"})(["padding:8px 0 0;"]),M=r.default.div.withConfig({componentId:"sc-11cocd3-13"})(["",";text-align:center;color:",";"],(e=>{let{theme:t}=e;return t["small-medium"]}),(e=>{let{theme:t}=e;return t.GREY_1})),N=r.default.div.withConfig({componentId:"sc-11cocd3-14"})(["",";text-align:center;color:",";padding:5px 0;"],(e=>{let{theme:t}=e;return t["tiny-regular"]}),(e=>{let{theme:t}=e;return t.GREY_6})),L=r.default.div.withConfig({componentId:"sc-11cocd3-15"})(["background-color:",";transition:all 0.4s ease;padding-top:24px;"," transform-origin:50% 0%;animation:"," 0.4s both ease;"],(e=>{let{theme:t}=e;return t.WHITE}),(e=>{let{isMobile:t}=e;return!t&&x}),s),V=r.default.div.withConfig({componentId:"sc-11cocd3-16"})([""," padding:0 16px 24px 24px;transition:all 0.9s ease;"],(e=>{let{isMobile:t}=e;return!t&&f})),O=r.default.div.withConfig({componentId:"sc-11cocd3-17"})(["",";text-align:left;color:",";transition:all 0.4s ease;"],(e=>{let{theme:t}=e;return t["body-medium"]}),(e=>{let{theme:t}=e;return t.GREY_1})),D=r.default.div.withConfig({componentId:"sc-11cocd3-18"})(["",";text-align:left;color:",";padding:8px 0;transition:all 0.4s ease;"],(e=>{let{theme:t}=e;return t["body-regular"]}),(e=>{let{theme:t}=e;return t.GREY_6})),G=r.default.div.withConfig({componentId:"sc-11cocd3-19"})(["height:auto;"," align-items:flex-end;",""],(e=>{let{theme:t}=e;return t.flexCentered}),(e=>{let{startHeartAnimation:t,selectedValue:i}=e;return t&&i&&v})),U=r.default.div.withConfig({componentId:"sc-11cocd3-20"})(["padding:32px 0;"," flex-direction:column;"],(e=>{let{theme:t}=e;return t.flexCentered})),B=r.default.div.withConfig({componentId:"sc-11cocd3-21"})(["",";text-align:center;color:",";"],(e=>{let{theme:t}=e;return t["tiny-regular"]}),(e=>{let{theme:t}=e;return t.GREY_7})),P=r.default.div.withConfig({componentId:"sc-11cocd3-22"})(["border-top:1px solid ",";padding:24px 0;"],(e=>{let{theme:t}=e;return t.GREY_9})),Y=r.default.div.withConfig({componentId:"sc-11cocd3-23"})(["padding:0 16px;"]),z=r.default.div.withConfig({componentId:"sc-11cocd3-24"})(["padding:0 16px;"]),F=r.default.div.withConfig({componentId:"sc-11cocd3-25"})(["width:100%;"]),$=r.default.div.withConfig({componentId:"sc-11cocd3-26"})(["width:100%;display:grid;grid-template-columns:repeat(3,1fr);padding:0 8px;"]),K=r.default.div.withConfig({componentId:"sc-11cocd3-27"})(["padding:8px 4px;color:",";",";background:transparent;text-align:center;border-radius:16px;box-shadow:",";margin:6px;transition:all 0.4s ease;cursor:pointer;border:solid 1px ",";display:inline;overflow:hidden;",""],(e=>{let{theme:t}=e;return t.BMS_PINK_1}),(e=>{let{theme:t}=e;return t["tiny-regular"]}),(e=>{let{theme:t}=e;return t.SHADOW_1}),(e=>{let{theme:t}=e;return t.GREY_6}),(e=>{let{isSelected:t}=e;return t&&R})),Q=r.default.div.withConfig({componentId:"sc-11cocd3-28"})(["opacity:0;visibility:hidden;overflow:hidden;height:0;",""],(e=>{let{startHeartAnimation:t,selectedValue:i}=e;return t&&i&&h})),Z=r.default.div.withConfig({componentId:"sc-11cocd3-29"})(["padding:24px 16px 0;border-top:1px solid ",";"],(e=>{let{theme:t}=e;return t.GREY_9})),q=r.default.div.withConfig({componentId:"sc-11cocd3-30"})(["padding:8px 0;"]),X=r.default.div.withConfig({componentId:"sc-11cocd3-31"})(["width:100%;min-height:360px;max-height:360px;height:",";"],(e=>{let{scrollHeight:t}=e;return`${t}px`})),J=r.default.div.withConfig({componentId:"sc-11cocd3-32"})(["background-color:",";"],(e=>{let{theme:t}=e;return t.WHITE})),ee=r.default.div.withConfig({componentId:"sc-11cocd3-33"})(["",""],(e=>{let{isMobile:t}=e;return t&&w}))},24206:(e,t,i)=>{i.r(t),i.d(t,{DEFAULT_REVIEW_CHAR_LIMIT:()=>a,RANGE:()=>r,SLIDE_TO_RATE:()=>n,customContainerStyle:()=>s,errorScreenWrapperStyle:()=>o});const n="Slide to rate",r="range",a=4e3,o={width:"100%",height:"inherit",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",background:"#fff",padding:"30px 0"},s={minWidth:0,overflow:"hidden",maxWidth:124,height:182,display:"block",margin:"0 auto",borderRadius:4}},48125:(e,t,i)=>{i.r(t),i.d(t,{failureAEventReviewOfUser:()=>p,failurePostwatchUserReview:()=>x,failureSaveRatingOnly:()=>o,failureSaveReviewAndRating:()=>d,hideUserReviewModal:()=>f,receivePostwatchUserReview:()=>m,receiveSaveRatingOnly:()=>a,receiveSaveReviewAndRating:()=>l,recieveAEventReviewOfUser:()=>u,requestAEventReviewOfUser:()=>c,requestPostwatchUserReview:()=>g,requestSaveRatingOnly:()=>r,requestSaveReviewAndRating:()=>s,setDefaultReviewRatingToastMsg:()=>h});var n=i(88629);const r=()=>({type:n.REQUEST_SAVE_RATING_ONLY}),a=e=>({type:n.RECEIVE_SAVE_RATING_ONLY,data:e}),o=e=>({type:n.FAILURE_SAVE_RATING_ONLY,error:e}),s=()=>({type:n.REQUEST_SAVE_REVIEW_RATING}),l=e=>({type:n.RECEIVE_SAVE_REVIEW_RATING,data:e}),d=e=>({type:n.FAILURE_SAVE_REVIEW_RATING,error:e}),c=()=>({type:n.REQUEST_SAVE_REVIEW_RATING}),u=e=>({type:n.RECEIVE_SAVE_REVIEW_RATING,data:e}),p=e=>({type:n.FAILURE_SAVE_REVIEW_RATING,error:e}),h=e=>({type:n.RESET_RATING_VALUES,data:e}),g=()=>({type:n.REQUEST_POSTWATCH_USER_REVIEW}),m=e=>({type:n.RECEIVE_POSTWATCH_USER_REVIEW,data:e}),x=e=>({type:n.FAILURE_POSTWATCH_USER_REVIEW,error:e}),f=e=>({type:n.HIDE_USER_REVIEW_MODAL,data:e})},85829:(e,t,i)=>{i.r(t),i.d(t,{default:()=>l});var n=i(96540),r=i(62486),a=i(97319),o=i(24206),s=i(74848);const l=e=>{let{range:t="0",updateRange:i=()=>{},updateGARatingCallback:l=()=>{},isAddReview:d=!1,isMobile:c=!1,svgName:u="star",ratingIds:p=[{id:0,value:""}]}=e;const[h,g]=(0,n.useState)("0"),[m,x]=(0,n.useState)("0"),[f,v]=(0,n.useState)("0"),[R,w]=(0,n.useState)("1"),[S,b]=(0,n.useState)("-6"),[E,I]=(0,n.useState)(!0),_=(0,n.useRef)(null),C=(0,n.useRef)(null),{value:T=""}=p[t]||{},y="0"===h?0:m;return(0,n.useEffect)((()=>{const e=C.current.offsetWidth;v(e),d&&b("20px")}),[]),(0,s.jsxs)(a.RatingSection,{ref:_,children:["0"===t?(0,s.jsxs)(a.SlideToRate,{isMobile:c,children:[o.SLIDE_TO_RATE,(0,s.jsx)(r.default,{fileName:"common",svgName:"next-arrow",width:"24px",height:"24px"})]}):null,(0,s.jsxs)(a.RatingSliderWrapper,{children:[(0,s.jsxs)(a.RatingSliderDiv,{children:[(0,s.jsx)(a.RatingSliderInput,{isMobile:c,id:o.RANGE,type:o.RANGE,value:t,ref:C,min:"0",max:"10",step:"1",onChange:e=>{if(d)return;const t=e.target.value;i(t),g(t);const n="0"===t,r=![0,90,100].includes(t);c?(b(n?"-6px":"20px"),w(n?"1":"0"),x(r?h>t?"20":"-20":n?"0":"")):b(n?"-6px":"20px")},onTouchEnd:()=>{const e=_.current.parentNode,t=e&&e.parentNode,i="0"!==h;d||(x("0"),setTimeout((()=>{i&&E&&t&&t.children[2].scrollIntoView({block:"start",behavior:"auto"})}),500),I(!1),l&&l())},onTouchStart:e=>{d||(e.target.focus(),x("0"))}}),(0,s.jsx)(a.Dividers,{}),(0,s.jsx)(a.SelectedRating,{isMobile:c,range:t,id:"rating-range",children:(0,s.jsx)(a.SliderTracker,{isMobile:c,sliderWidth:f,children:Array.from({length:10}).map(((e,t)=>(0,s.jsx)(a.SliderSpan,{isLast:9===t})))})}),(0,s.jsx)(a.RangeThumb,{range:t}),(0,s.jsx)(a.HeartIcon,{id:"hearticon",range:t,rotateValue:y,heartUpAnimation:S,heartZindex:R,children:(0,s.jsx)(a.HeartIconSpan,{children:(0,s.jsx)(r.default,{fileName:"common",svgName:u,width:"100%",height:"100%"})})})]}),(0,s.jsx)(a.SliderCount,{children:(0,s.jsx)(a.SliderCountSpan,{id:"output",children:T})})]})]})}},97319:(e,t,i)=>{i.r(t),i.d(t,{Dividers:()=>g,HeartIcon:()=>R,HeartIconSpan:()=>w,RangeThumb:()=>v,RatingSection:()=>d,RatingSliderDiv:()=>p,RatingSliderInput:()=>h,RatingSliderWrapper:()=>u,SelectedRating:()=>m,SlideToRate:()=>c,SliderCount:()=>S,SliderCountSpan:()=>b,SliderSpan:()=>f,SliderTracker:()=>x});var n=i(21960);const r=(0,n.css)(["&::-webkit-slider-thumb{height:10px;width:10px;}&::-moz-range-thumb{border-color:transparent;color:transparent;height:20px;width:20px;position:absolute;}@-moz-document 'url-prefix'(){z-index:1;&::-moz-range-thumb{background-color:",";width:12px;height:12px;top:-6px;margin-left:-12px;box-shadow:",";border:solid 1px ",";transition:all 0.4s ease;position:absolute;}}"],(e=>{let{theme:t}=e;return t.BMS_PINK_1}),(e=>{let{theme:t}=e;return t.SHADOW_2}),(e=>{let{theme:t}=e;return t.WHITE})),a=(0,n.css)(["@-moz-document 'url-prefix'(){z-index:1;}"]),o=(0,n.css)(["@-moz-document 'url-prefix'(){display:none;}"]),s=(0,n.css)(["@-moz-document 'url-prefix'(){border:solid 1px transparent;box-shadow:none;background:transparent;}"]),l=(0,n.css)(["@-moz-document 'url-prefix'(){margin-bottom:20px;}"]),d=n.default.div.withConfig({componentId:"sc-hxn80v-0"})(["padding:42px 0 0;transition:all 0.9s ease;"]),c=n.default.div.withConfig({componentId:"sc-hxn80v-1"})(["text-align:center;color:",";",";text-transform:uppercase;",""],(e=>{let{theme:t}=e;return t.GREY_6}),(e=>{let{theme:t}=e;return t["extreme-tiny-regular"]}),(e=>{let{theme:t}=e;return t.flexCentered})),u=n.default.div.withConfig({componentId:"sc-hxn80v-2"})([""," margin-left:4px;"],(e=>{let{theme:t}=e;return t.flexYFlexStart})),p=n.default.div.withConfig({componentId:"sc-hxn80v-3"})(["position:relative;width:80%;max-height:20px;"]),h=n.default.input.withConfig({componentId:"sc-hxn80v-4"})(["appearance:none;outline:none;background-color:",";height:6px;border-radius:3px;width:100%;transition:all 0.4s ease;position:absolute;left:0;top:0;margin-top:8px;&:focus{outline:none;}&:focus::-webkit-slider-runnable-track,&::-webkit-slider-runnable-track{width:100%;height:6px;cursor:pointer;animation:0.2s;background:transparent;border-radius:1px;position:relative;z-index:99;}&::-webkit-slider-thumb{height:60px;width:60px;border-radius:50%;background:transparent;cursor:pointer;appearance:none;margin-top:-20px;position:relative;z-index:9;border:0;}&:focus::-moz-range-track,&::-moz-range-track{width:100%;height:6px;border-radius:3px;cursor:pointer;animation:0.2s;background:",";}&::-moz-range-thumb{height:60px;width:60px;border-radius:50%;background:transparent;cursor:pointer;appearance:none;margin-top:-20px;position:relative;z-index:9;}&:focus::-ms-track,&::-ms-track{width:100%;height:6px;cursor:pointer;animation:0.2s;background:transparent;border-color:transparent;color:transparent;}&:focus::-ms-fill-lower,&::-ms-fill-lower,&:focus::-ms-fill-upper,&::-ms-fill-upper{background:",";border-radius:2px;}&::-ms-thumb{height:60px;width:60px;border-radius:50%;background:transparent;cursor:pointer;appearance:none;margin-top:-20px;position:relative;z-index:9;}",""],(e=>{let{theme:t}=e;return t.WHITE}),(e=>{let{theme:t}=e;return t.GREY_8}),(e=>{let{theme:t}=e;return t.GREY_8}),(e=>{let{isMobile:t}=e;return!t&&r})),g=n.default.div.withConfig({componentId:"sc-hxn80v-5"})(["height:6px;border-radius:3px;background:",";position:absolute;left:0;top:0;margin-top:8px;"," width:100%;transition:all 0.4s ease;"],(e=>{let{theme:t}=e;return t.GREY_8}),(e=>{let{theme:t}=e;return t.flexYCentered})),m=n.default.div.withConfig({componentId:"sc-hxn80v-6"})(["height:6px;border-radius:3px;background:",";position:absolute;left:0;top:0;margin-top:8px;"," transition:all 0.4s ease;"," width:",""],(e=>{let{theme:t}=e;return t.BMS_PINK_1}),(e=>{let{theme:t}=e;return t.flexYCentered}),(e=>{let{isMobile:t}=e;return!t&&a}),(e=>{let{range:t}=e;return 10*t+"%"})),x=n.default.div.withConfig({componentId:"sc-hxn80v-7"})(["height:6px;border-radius:3px;background:transparent;"," width:100%;transition:all 0.4s ease;"," min-width:",""],(e=>{let{theme:t}=e;return t.flexYCentered}),(e=>{let{isMobile:t}=e;return!t&&o}),(e=>{let{sliderWidth:t}=e;return`${t}px`})),f=n.default.span.withConfig({componentId:"sc-hxn80v-8"})(["height:3px;width:10%;display:block;margin-top:2px;border-right:",";"],(e=>{let{isLast:t,theme:i}=e;return t?"0":`1px solid ${i.WHITE}`})),v=n.default.div.withConfig({componentId:"sc-hxn80v-9"})(["width:12px;left:0;transform:translateX(-7%) rotate(0deg);height:12px;border-radius:100%;background:",";position:absolute;top:4px;margin-left:-6px;box-shadow:",";border:solid 1px ",";transition:all 0.4s ease;",";left:",";"],(e=>{let{theme:t}=e;return t.BMS_PINK_1}),(e=>{let{theme:t}=e;return t.SHADOW_1}),(e=>{let{theme:t}=e;return t.WHITE}),(e=>{let{isMobile:t}=e;return!t&&s}),(e=>{let{range:t}=e;return 10*t+"%"})),R=n.default.div.withConfig({componentId:"sc-hxn80v-10"})(["width:30px;height:30px;position:absolute;bottom:-16px;left:0;margin-bottom:-6px;transition:all 0.6s ease;",";left:",";transform:",";margin-bottom:",";z-index:",";"],(e=>{let{isMobile:t}=e;return!t&&l}),(e=>{let{range:t}=e;return 10*t+"%"}),(e=>{let{rotateValue:t}=e;return`translateX(-15px) rotate(${t}deg)`}),(e=>{let{heartUpAnimation:t}=e;return`${t}`}),(e=>{let{heartZindex:t}=e;return`${t}`})),w=n.default.span.withConfig({componentId:"sc-hxn80v-11"})(["width:30px;height:30px;transition:all 0.6s ease;"]),S=n.default.div.withConfig({componentId:"sc-hxn80v-12"})(["min-width:40px;text-align:right;padding-left:24px;"]),b=n.default.span.withConfig({componentId:"sc-hxn80v-13"})(["",";color:",";"],(e=>{let{theme:t}=e;return t["body-bold"]}),(e=>{let{theme:t}=e;return t.GREY_1}))},99915:(e,t,i)=>{i.r(t),i.d(t,{default:()=>_});var n=i(96540),r=i(71468),a=i(6161),o=i(56314),s=i(62486),l=i(43571),d=i(94995),c=i(45441),u=i(35387),p=i(40903),h=i(81097),g=i(67005),m=i(48125),x=i(38548),f=i(7982),v=i(19204),R=i(2285),w=i(85829),S=i(15349),b=i(24206),E=i(74848);const I=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{font:t="",color:i="",weight:n=""}=e;return{fontSize:t,color:i,fontWeight:n}},_=e=>{let{eventCode:t="",EventGroup:i="",ratingValue:_="0",handleClose:C=()=>null,pageType:T="",type:y="",selectedValue:A="",pathname:j="",title:k="",handleOnSubmitCallback:H=()=>null,eventTitle:W="",regionNameSlug:M,isReviewOnly:N=!1,watchedStatus:L=""}=e;const V=(0,r.wA)(),{addSnackbar:O}=(0,u.useSnackbar)(),D=(0,n.useRef)(null),G=(0,n.useRef)(null),[U,B]=(0,n.useState)(!0),[P,Y]=(0,n.useState)(!1),[z,F]=(0,n.useState)(!1),[$,K]=(0,n.useState)("0"),[Q,Z]=(0,n.useState)(!1),[q,X]=(0,n.useState)(0),[J,ee]=(0,n.useState)(""),[te,ie]=(0,n.useState)(!1),[ne,re]=(0,n.useState)(-1),[ae,oe]=(0,n.useState)([]),[se,le]=(0,n.useState)([]),[de,{data:ce,error:ue,isSuccess:pe}]=(0,v.useInsertReviewAndRatingMutation)(),he=ce?.success,ge=ce?.error||ue?.data||pe&&!ce,me=ue?.data?a.GLOBAL_STREAM_ERROR_MESSAGE:ce?.error?.message||ue?.data?.error?.message,{appConfigurationObject:xe={}}=(0,r.d4)((e=>({userDetail:e.cookies[x.COOKIE_USER_DETAIL],appConfigurationObject:(0,o.getAppConfigurationObject)(e)}))),{data:fe,isLoading:ve,error:Re,refetch:we}=(0,v.useReviewAndRatingDetailsQuery)({eventCode:t}),{hashtagSection:Se={},ctaSection:be={},headerSection:Ee={},ratingSection:Ie={},reviewSection:_e={},message:Ce=""}=fe||{},{isDesktop:Te}=xe,ye=!Te,Ae="PTM"===y,{imageCode:je="",primaryText:ke={},secondaryText:He={}}=Ee||{},{primaryText:We={},secondaryText:Me={},svgName:Ne="",ratingIds:Le=[],iconRatingSVGName:Ve=""}=Ie||{},{onClickText:Oe={},placeHolderText:De={},primaryText:Ge={},secondaryText:Ue={},reviewCharLimit:Be=b.DEFAULT_REVIEW_CHAR_LIMIT}=_e||{},{text:Pe="",style:Ye={}}=ke,{text:ze="",style:Fe={}}=We,{text:$e="",style:Ke={}}=He,{text:Qe="",style:Ze={}}=Me,{text:qe=""}=Oe,{text:Xe=""}=De,{text:Je="",style:et={}}=Ge,{text:tt="",style:it={}}=Ue,nt={screen_name:"submit_rating",product:"movies",rating_percentage:A||"",event_code:t,event_group:i},rt=()=>{const e=D.current?.scrollTop||0,t=G.current?.offsetHeight||0;re(e-t)},at=()=>{"discovery"===T&&V((0,f.setLocalStorage)({name:x.SEARCH_RNR_BOTTOMSHEET,value:t})),C(),"synopsis"!==y&&"PTM"!==y&&window.scrollTo(0,0)},ot=async()=>{const e=Le.find((e=>{let{id:t}=e;return t.toString()===$}))||{},{id:i=0}=e;let n={eventCode:t,ratingId:i};Y(!0),(ae.length||J)&&(n={...n,hashtags:ae.length?ae:[],reviewText:J||""}),window.scrollTo(0,0),await de(n),V((0,f.setLocalStorage)({name:x.SEARCH_RNR_BOTTOMSHEET,value:t})),Y(!1),setTimeout((()=>{V((0,m.setDefaultReviewRatingToastMsg)({}))}),2e3),setTimeout((()=>{V((0,f.deleteCookie)({name:x.RNR_VIEWIT_DATA}))}),2500),at(),(0,g.handleAnalyticsForAllVendors)({...nt,event_name:"submit_rating_button_clicked"})},st=e=>{const{hashtagid:t,hashtag:i}=e.currentTarget.dataset;se.includes(t)?(le(se.filter((e=>e!==t))),oe(ae.filter((e=>e.Id!==t)))):(le([...se,t]),oe([...ae,{Id:t,Value:i}]))};return(0,n.useEffect)((()=>{const e=G?.current?.offsetHeight||270,t=window.innerHeight-2*e,i="0"!==_;return X(t?t+66:0),K(_||"0"),B(!i),F(i),document.addEventListener("scroll",rt,!(0,o.supportsPassive)()||{passive:!0,capture:!0}),(0,g.handleAnalyticsForAllVendors)({...nt,event_name:"submit_rating_viewed"},!0),()=>{document.removeEventListener("scroll",rt,!(0,o.supportsPassive)()||{passive:!0,capture:!0}),V(v.reviewRatingApi.util.resetApiState())}}),[]),(0,n.useEffect)((()=>{ge&&O({content:(0,E.jsx)(h.default,{message:me||a.GLOBAL_ERROR_MESSAGE,icon:(0,E.jsx)(s.default,{fileName:"toasts",svgName:"error",width:"100%",height:"100%"})}),duration:4e3}),("synopsis"===y||"PTM"===y)&&he&&ce?H({currentUserRating:$,hasUserRated:!0}):V((0,f.setLocalStorage)({name:x.RNR_VIEWIT_DATA,value:{eventCode:t,movieName:k}})),he&&ce&&(()=>{const e=(0,o.slugify)(W);let i="";i=j.includes("/user-reviews")?j:j.includes("/critic-reviews")?`${j.split("/critic-reviews")[0]}/user-reviews`:`${a.BASE_URL}movies/${M}/${e}/${t}/user-reviews`,window.location.assign(i)})()}),[ge,he,ce]),ve?(0,E.jsx)(R.default,{fullHeight:!0}):(0,E.jsx)(S.ReviewRatingWrapper,{isMobile:ye,children:(0,E.jsxs)(S.ReviewRatingContent,{isDesktop:Te,children:[(0,E.jsx)(S.Head,{isMobile:ye,children:(0,E.jsxs)(S.HeaderColumn,{children:[(0,E.jsx)(S.SideSection,{}),(0,E.jsxs)(S.CenterSection,{children:[(0,E.jsx)(S.HeaderTitle,{scrollTop:ne>=0,style:I(Ye),children:Pe}),ne>=0&&(0,E.jsx)(S.EventTitle,{children:W})]}),(0,E.jsx)(S.SideSection,{onClick:()=>{at(),(0,g.handleAnalyticsForAllVendors)({...nt,event_name:"submit_rating_close_clicked"})},role:"button",tabIndex:[0],children:(0,E.jsx)(s.default,{fileName:"common",svgName:"cross",height:"18px",width:"18px"})})]})}),Ce||Re?.data?(0,E.jsx)(c.default,{type:"API_FAILURE",buttonClickHandler:()=>{we({eventCode:t})},customContainerStyle:b.errorScreenWrapperStyle,customDescription:Ce||Re?.data}):(0,E.jsxs)(n.Fragment,{children:[(0,E.jsxs)(S.RatingContentWrapper,{isMobile:ye,inputScroll:Q,ref:D,children:[ye&&Q&&(0,E.jsx)(S.BlackSection,{}),ye&&(0,E.jsx)(S.ImageWrapper,{ref:G,children:(0,E.jsxs)(S.InnerDetails,{children:[(0,E.jsx)(p.default,{alt:"review-rating-modal-img",src:je?`${a.MOVIE_IMG_URL}${je}.jpg`:a.NO_IMAGE_PLACEHOLDER,onError:e=>{e.target.setAttribute("src",a.NO_IMAGE_PLACEHOLDER)},width:"100%",height:"182px",customContainerStyle:b.customContainerStyle}),(0,E.jsxs)(S.Details,{children:[(0,E.jsx)(S.Name,{style:I(Ke),children:$e}),L&&(0,E.jsxs)(S.Watched,{children:["You watched",L]})]})]})}),(0,E.jsxs)(S.RatingDetails,{isMobile:ye,children:[(0,E.jsxs)(S.RatingWrapper,{isMobile:ye,children:[(0,E.jsx)(S.RatingWrapperTitle,{style:I(Fe),children:ze}),(0,E.jsx)(w.default,{range:$,isAddReview:N||!1,updateRange:e=>{const t=document.getElementsByClassName("tag");for(let i=0;i<t.length;i+=1)t[i].classList.remove("selected");K(e),F(!0),oe([]),(e=>{"0"!==e&&B(!1)})(e)},updateGARatingCallback:()=>{(0,g.handleAnalyticsForAllVendors)({...nt,event_name:"toggle_rating_slider_clicked"})},isMobile:ye,svgName:Ne,ratingIds:Le,isPTMPage:Ae})]}),q&&(0,E.jsx)(S.RatingsMatter,{startHeartAnimation:z,selectedValue:"0"!==$,children:(0,E.jsxs)(S.RatingsMatterInner,{children:[(0,E.jsx)(s.default,{fileName:"synopsis",svgName:Ve,width:"182px",height:"26px"}),(0,E.jsx)(S.RatingsMatterText,{style:I(Ze),children:Qe})]})}),"0"!==$?(0,E.jsxs)(n.Fragment,{children:[(()=>{const{hashtags:e=[],secondaryText:t={}}=Se,{text:i="",style:n={}}=t;return e.map((e=>{let{value:t,bucketId:r,primaryText:a,hashtags:o}=e;const s=$===t.toString(),{text:l="",style:d={}}=a;return s&&(0,E.jsxs)(S.HashtagSection,{children:[(0,E.jsxs)(S.HashtagSectionHeading,{children:[(0,E.jsx)(S.RatingWrapperTitle,{style:I(d),children:l}),(0,E.jsx)(S.SubTitle,{style:I(n),children:i})]}),(0,E.jsx)(S.ReviewHashtagList,{children:(0,E.jsx)(S.ReviewHashtags,{children:(c=o,c.map((e=>{let{id:t,value:i}=e;const n=se.includes(t.toString());return(0,E.jsx)(S.ReviewTag,{"data-hashtagid":t,"data-hashtag":i,onClick:st,role:"button",tabIndex:[0],isSelected:n,children:i},t)})))})})]},r);var c}))})(),(0,E.jsx)(S.FormWrapper,{startHeartAnimation:z,selectedValue:"0"!==$,children:(0,E.jsxs)(S.FormSection,{children:[(0,E.jsxs)(S.RatingWrapperTitle,{style:I(et),children:[Je,"Â ",(0,E.jsx)("span",{style:I(it),children:tt})]}),(0,E.jsx)(S.TextReviewSection,{children:(0,E.jsx)(l.default,{type:"textarea",elementId:"description",placeholderMessage:te?qe:Xe,customValidation:e=>e.length>=0||!e.length,errorMessage:" ",handleFocus:()=>{Z(!1),ie(!1)},handleBlur:()=>{Z(!0),ie(!0)},onChangeCallback:e=>{const t=e.currentTarget.value;ee(t)},maxLength:Be})})]})})]}):null]}),ye&&z&&"0"!==$&&(0,E.jsx)(S.ScrollArea,{scrollHeight:q})]}),(()=>{const e=J&&J.trim(),{primaryCta:t={},secondaryCta:i={}}=be,{text:n="",style:r=""}=ae.length||e?i:t;return(0,E.jsx)(S.BottomBarWrapper,{isMobile:ye,children:(0,E.jsx)(d.default,{primaryButtonText:n,isPrimaryButtonDisabled:U,isPrimaryButtonLoading:P,onPrimaryClickHandler:ot,primaryButtonCustomStyle:I(r)})})})()]})]})})}}}]);